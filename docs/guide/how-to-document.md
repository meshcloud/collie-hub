# Documenting Kit Modules

If you followed the [Getting started](./../tutorial/README.md) tutorial, you have already seen the
markdown-based documentation output generated by `collie foundation docs`. Human-readable documentation
for application teams helps them decide ahead of time whether your landing zones are suitable for their application.

The documentation also lets you document important policies for other stakeholders like IT Security auditors in your
organization.

## How kit modules generate documentation

Collie includes a markdown-based documentation workflow that leverages the
`output "documentation_md"` generated by every kit module.

Kit modules from [collie hub](../../modules/README.md) or generated by `collie init` include a `documentation.tf` file
that produce a `documentation_md` output with a hcl ["heredoc" string](https://www.terraform.io/language/expressions/strings).

:::: code-group
::: code-group-item documentation.tf

```hcl
output "documentation_md" {
  value = <<EOF
All resources of this platform are nested under the top-level GCP folder `${var.root_folder_name}`.
All policies described below are also set at this folder level.

### Resource Locations

[Resource Locations](https://cloud.google.com/resource-manager/docs/organization-policy/defining-locations) restrics deployment of resources to whitelisted regions.
This prevents deployment of resources outside of approved locations.

The allowed resource locations are

${join("\n", formatlist("- `%s`", var.resource_locations_to_allow))}

EOF
}
```

:::
::::

As you can see, this string makes use of standard markdown formatting to provide headings and links.
It also leverages terraform resources and variables already present in your terraform code to generate documentation.

::: tip
Using terraform resources, variables and data objects in your documentation helps ensure that documentation is 
automatically updated when you make any changes to your landing zones in the future. This helps maintain accurate
and relevant documentation with low effort.
:::

## How collie generates documentation

When you run `collie foundation docs`, collie will run terragrunt to collect the `documentation_md` output from every
[platform module](./../reference/repository.md#platform-modules) in your foundation. Collie uses the collected outputs to generate
a markdown file structure that works well with static site generators.

This 

You can find this output in your collie repository at `foundations/*/.docs/docs`.

> At the moment collie supports 

```shellsession
16:03 $ tree foundations/likvid-prod/.docs/docs/
foundations/meshcloud-dev/.docs/docs/
├── README.md
├── compliance
│   ├── README.md

└── platforms
    ├── README.md
    ├── aws.aws-meshstack-dev.md
    ├── azure.meshcloud-azure-dev.md
    └── gcp.gcp-meshstack-dev.md

20 directories, 91 files
```

## Next Steps

That's it, you now know how to create new kit modules and deploy them to your cloud platforms. Here's some 
next steps to go from here

- [Tutorial: document compliance](./compliance-control.md)
- Create a separate dev/prod foundation for testing your kit modules
- Leverage terragrunt to DRY your platform configuration code
